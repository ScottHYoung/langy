<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Langy • Study Card</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body class="min-h-screen bg-slate-100 text-slate-900 antialiased">
  <div id="app" class="flex min-h-screen flex-col items-center justify-center gap-10 px-6 py-16 text-center">
    <div class="flex w-full max-w-2xl items-center justify-center">
      <div
        class="group relative w-full max-w-2xl cursor-pointer rounded-3xl border border-slate-200 bg-white shadow-[0_18px_45px_-25px_rgba(15,23,42,0.35)] transition duration-500 hover:shadow-[0_24px_55px_-20px_rgba(15,23,42,0.45)]"
        @click="toggleCard"
      >
        <div class="transition-transform duration-500" :class="isFlipped ? 'rotate-y-180' : ''">
          <article
            class="card-face absolute inset-0 flex min-h-[420px] flex-col items-center justify-center gap-6 px-12 text-center"
            :class="isFlipped ? 'invisible pointer-events-none' : ''"
          >
            <p class="max-w-xl text-3xl leading-relaxed text-slate-900" v-html="highlightFocus(card.sentence)"></p>
            <span class="text-xs uppercase tracking-[0.35em] text-slate-400">Tap to reveal</span>
          </article>
          <article
            class="card-face absolute inset-0 flex min-h-[420px] flex-col items-center justify-center gap-6 px-12 rotate-y-180 text-center"
            :class="isFlipped ? '' : 'invisible pointer-events-none'"
          >
            <div class="space-y-4 text-slate-900">
              <p class="max-w-xl text-2xl leading-relaxed" v-html="highlightFocus(card.sentence)"></p>
              <p class="max-w-xl text-xl leading-relaxed text-slate-700">{{ card.translation }}</p>
            </div>
            <div class="w-full max-w-xl rounded-2xl border border-slate-200 bg-white p-6 text-left shadow-sm">
              <div class="flex flex-wrap items-center gap-4">
                <span class="text-4xl font-semibold text-amber-500">{{ card.focus.hanzi }}</span>
                <div>
                  <p class="text-sm text-slate-600">{{ card.focus.pinyin }}</p>
                  <p class="text-xs uppercase tracking-[0.2em] text-slate-400">{{ card.focus.literal }}</p>
                </div>
              </div>
              <p class="mt-4 text-sm leading-relaxed text-slate-700">{{ card.focus.definition }}</p>
            </div>
            <span class="text-xs uppercase tracking-[0.35em] text-slate-400">Tap to return</span>
          </article>
        </div>
      </div>
    </div>

    <div class="grid w-full max-w-2xl gap-4 sm:grid-cols-3">
      <button
        v-for="button in responseButtons"
        :key="button.type"
        type="button"
        :class="button.classes"
        @click.stop="recordResponse(button.type)"
      >
        {{ button.label }}
      </button>
    </div>

    <transition name="fade">
      <p
        v-if="responseCopy"
        class="rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-600 shadow-sm"
      >
        {{ responseCopy }}
      </p>
    </transition>
  </div>

  <style>
    .card-face {
      backface-visibility: hidden;
      transform-style: preserve-3d;
    }
    .rotate-y-180 {
      transform: rotateY(180deg);
    }
    .group > div {
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }
    .group.relative {
      perspective: 1600px;
    }
    .fade-enter-active,
    .fade-leave-active {
      transition: opacity 0.3s;
    }
    .fade-enter-from,
    .fade-leave-to {
      opacity: 0;
    }
  </style>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          isFlipped: false,
          lastResponse: '',
          card: {
            sentence: {
              text: '今天的天气非常好，我们决定去公园散步。',
              focus: '散步'
            },
            translation: 'The weather is great today, so we decided to take a walk in the park.',
            focus: {
              hanzi: '散步',
              pinyin: 'sànbù',
              literal: 'scatter + steps',
              definition: 'A relaxed walk taken for leisure or light exercise.'
            }
          },
          responseMap: {
            sentence: 'Logged full comprehension. We’ll queue something harder.',
            focus: 'Focus word captured. We’ll recycle the sentence soon.',
            unknown: 'Logged for review. We’ll surface supporting cards.'
          }
        };
      },
      computed: {
        responseCopy() {
          return this.lastResponse ? this.responseMap[this.lastResponse] : '';
        },
        responseButtons() {
          return [
            {
              type: 'sentence',
              label: 'Fully understood.',
              classes:
                'h-14 rounded-2xl border border-emerald-400/60 bg-emerald-50 text-sm font-medium text-emerald-700 transition hover:bg-emerald-100 hover:border-emerald-500'
            },
            {
              type: 'focus',
              label: 'Focus word understood.',
              classes:
                'h-14 rounded-2xl border border-sky-400/60 bg-sky-50 text-sm font-medium text-sky-700 transition hover:bg-sky-100 hover:border-sky-500'
            },
            {
              type: 'unknown',
              label: "I don't know the focus word.",
              classes:
                'h-14 rounded-2xl border border-rose-400/60 bg-rose-50 text-sm font-medium text-rose-700 transition hover:bg-rose-100 hover:border-rose-500'
            }
          ];
        }
      },
      methods: {
        toggleCard() {
          this.isFlipped = !this.isFlipped;
        },
        highlightFocus(sentence) {
          const focus = sentence.focus;
          const highlight = `<span class="rounded-md bg-amber-200 px-1 text-slate-900">${focus}</span>`;
          return sentence.text.replace(new RegExp(focus, 'g'), highlight);
        },
        recordResponse(type) {
          if (!this.responseMap[type]) return;
          this.lastResponse = type;
        }
      }
    }).mount('#app');
  </script>
</body>
</html>
